<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Batman Game ü¶á</title>
<style>
    body {
        margin: 0;
        background: radial-gradient(circle, #111, #000);
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
    }
    h1 {
        margin: 10px 0;
    }
    canvas {
        background: linear-gradient(#111, #222);
        border: 3px solid yellow;
        display: block;
        margin: 0 auto;
    }
    .info {
        margin: 10px;
        font-size: 14px;
    }
</style>
</head>
<body>

<h1>ü¶á Batman: Gotham Defender</h1>
<div class="info">
    Move: ‚¨ÖÔ∏è ‚û°Ô∏è | Shoot: Space | Score enemies before they reach you
</div>

<canvas id="game" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Game state
let score = 0;
let gameOver = false;

// Batman
const batman = {
    x: 280,
    y: 340,
    width: 40,
    height: 40,
    speed: 5
};

// Bullets (Batarangs)
let bullets = [];

// Enemies
let enemies = [];

// Controls
const keys = {};
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

// Shoot
document.addEventListener("keydown", e => {
    if (e.code === "Space" && !gameOver) {
        bullets.push({ x: batman.x + 18, y: batman.y, speed: 7 });
    }
});

// Spawn enemies
setInterval(() => {
    if (!gameOver) {
        enemies.push({
            x: Math.random() * (canvas.width - 30),
            y: -30,
            width: 30,
            height: 30,
            speed: 2 + Math.random() * 2
        });
    }
}, 1000);

// Collision detection
function collide(a, b) {
    return (
        a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y
    );
}

// Draw Batman
function drawBatman() {
    ctx.fillStyle = "black";
    ctx.fillRect(batman.x, batman.y, batman.width, batman.height);
    ctx.fillStyle = "yellow";
    ctx.fillText("ü¶á", batman.x + 8, batman.y + 28);
}

// Draw score
function drawScore() {
    ctx.fillStyle = "white";
    ctx.font = "16px Arial";
    ctx.fillText("Score: " + score, 10, 20);
}

// Game loop
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (gameOver) {
        ctx.fillStyle = "red";
        ctx.font = "30px Arial";
        ctx.fillText("GAME OVER", 200, 200);
        ctx.font = "18px Arial";
        ctx.fillText("Final Score: " + score, 225, 240);
        return;
    }

    // Movement
    if (keys["ArrowLeft"] && batman.x > 0) batman.x -= batman.speed;
    if (keys["ArrowRight"] && batman.x < canvas.width - batman.width)
        batman.x += batman.speed;

    // Bullets
    bullets.forEach((b, i) => {
        b.y -= b.speed;
        ctx.fillStyle = "yellow";
        ctx.fillRect(b.x, b.y, 4, 10);
        if (b.y < 0) bullets.splice(i, 1);
    });

    // Enemies
    enemies.forEach((e, ei) => {
        e.y += e.speed;
        ctx.fillStyle = "red";
        ctx.fillRect(e.x, e.y, e.width, e.height);

        // Enemy hits Batman
        if (collide(batman, e)) {
            gameOver = true;
        }

        // Bullet hits enemy
        bullets.forEach((b, bi) => {
            if (collide({x:b.x,y:b.y,width:4,height:10}, e)) {
                enemies.splice(ei, 1);
                bullets.splice(bi, 1);
                score++;
            }
        });

        // Enemy passes bottom
        if (e.y > canvas.height) {
            gameOver = true;
        }
    });

    drawBatman();
    drawScore();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
